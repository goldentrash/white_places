#!/bin/sh

# ONLY do at master branch
git-branch-is master
if [ $? -eq 0 ]
then
  # Lint
  yarn run lint

  if [ $? -ne 0 ]
  then
    echo "lint error"
    exit 1
  fi

  # Unit Test
  yarn run test:unit

  if [ $? -ne 0 ]
  then
    echo "Unit Test Failed"
    exit 1
  fi

  # Format
  yarn run format

  if [ $? -ne 0 ]
  then
    echo "Format Failed"
    exit 1
  fi
else
  echo "current branch is not master"
  echo "skip checking sources"
fi